// https://adventofcode.com/2023/day/13

const getChunksDiff = (leftChunk: string, rightChunk: string): number => {
  let diffCount = 0
  for (let i = 0; i < leftChunk.length; i++) {
    if (leftChunk[i] !== rightChunk[i]) diffCount += 1
  }
  return diffCount
}

const getChunksSymmetry = (chunks: string[], applyFlip?: boolean): number | undefined => {
  for (let index = 0; index < chunks.length - 1; index++) {
    let indexShift = 0
    let didApplyFlip = false
    while (true) {
      const leftChunk = chunks[index - indexShift]
      const rightChunk = chunks[index + 1 + indexShift]

      if (!leftChunk || !rightChunk) {
        if (applyFlip && !didApplyFlip) break
        return index
      }
      if (leftChunk !== rightChunk) {
        if (!applyFlip || didApplyFlip || getChunksDiff(leftChunk, rightChunk) !== 1) break
        didApplyFlip = true
      }
      indexShift += 1
    }
  }
}

export type SymmetryLine = { isVertical: boolean; index: number }

export const getSymmetryLine = (pattern: string, applyFlip?: boolean): SymmetryLine | undefined => {
  const rowStrings = pattern.split('\n')

  const horizontalLineIndex = getChunksSymmetry(rowStrings, applyFlip)
  if (horizontalLineIndex !== undefined) return { isVertical: false, index: horizontalLineIndex }
  const grid = rowStrings.map((row) => row.split(''))
  const columnStrings = grid[0].map((_, index) => grid.map((row) => row[index]).join(''))
  const verticalLineIndex = getChunksSymmetry(columnStrings, applyFlip)
  if (verticalLineIndex !== undefined) return { isVertical: true, index: verticalLineIndex }
}

export const getPatternSummary = (lines: SymmetryLine[]): number =>
  lines.reduce((acc, { isVertical, index }) => acc + (isVertical ? 1 : 100) * (index + 1), 0)

if (Bun.env.NODE_ENV !== 'test') {
  const input = `.####..#.#.#.##..
........#..##....
..##..#.....#..##
......##.##.#####
######.#.####....
..##....#..##.#..
.#..#..#####.#...
..##...#..#...#.#
#######.#....####

#.###..####
..#####....
#.##...####
##..#.##..#
##.#.##.##.
##.#.##.##.
##..#.##..#
#.##...####
..###.#....
#.###..####
.##....#..#

.##...#...#####
...######..#.#.
..#.#..#.####..
#..#...##.##..#
#..#...##.##..#
..#.#..#.####..
#..######..#.#.
.##...#...#####
#..#..#.#...#.#
####.#####..#..
....#.##..##...
#..######..#.##
##.#...#..##.#.
##.#...#..##.#.
#..######..#.##
....#.##..##...
####.#####..#..

#####..#####.##
.............##
#..######..##..
.##.#..#.##.#.#
....####....##.
#..##..##..###.
#.########.#.#.
.##..##..##...#
#..##..##..##..
####....####..#
....####....#..

...#....##...
.#.##....#...
#..##.####.#.
#.#####.##.#.
##...#.##.#.#
##...#.##.#.#
#.#####.##.#.
#..##.####.#.
.#.##....#...
...#....##...
...#....##...
.#.##....#...
#..##.####.#.
#.###.#.##.#.
##...#.##.#.#

####.##.#..#.#...
....##.####.#.#..
....##.####.#.#..
####.##.#..#.#...
..#####...####.##
#####..##.###...#
.##...##.....###.
.##...##.....###.
#####..##.###...#
..#####...####.##
#.##.##.#..#.#...

#.##########.
##.#..##..#.#
..#.##..##.#.
#...#....#...
##.#......#.#
#.#.#....#.#.
###...##...##
###...##...##
#.#.#....#.#.
##.#......#.#
....#....#...

....##....##.....
.####.####.####..
###....##....###.
###....##....###.
.####.####.####..
....##....##.....
..##..#..#..##..#
.###############.
.##.#..##..#.##..

####.#..#.####..#
####..##..#######
#.#.#.##.#.#.####
##.#..##..#.##..#
.#####...####....
.###.#..#.###....
.##..#..#..##....
..#.######.#..##.
#..#......#..#..#
######..######..#
#.##..##..##.####
..##.####.##..##.
...##.##.##...##.
..#.#....#.#..##.
.##..#..#..##.##.
#####....########
##..##..##..#####

..###.#..#.##
#####.####.##
...##.#..#.##
...##.####.##
###.#......#.
###..######..
###..........
..##..##.#..#
...###.##.###

##...####...###
##...####...###
#....#..#....##
##..........###
#.##########.#.
..#..#..#.##...
.#...####...#.#
#..#.####.#..#.
.##..####..##.#
###..####..###.
#..##.##.##..#.
#.#........#.#.
#.....##.....#.

#..#####.#.
.#.#...####
.##.#####.#
#...###.#.#
#..####.#.#
.##.#####.#
.#.#...####
#..#####.#.
####..#..##
####....##.
####....##.
####..#..##
#..#####.#.
.#.#...####
.##.#####.#

.######.####...
..#..#....##...
..#..#....##...
.######.####...
###..######.##.
.........#..###
..#####.#.#####
#.#..#.##.....#
.##..##....####
...##...##..#..
.#....#.#.#..##
...##....#####.
.#.##.#.###.###

###.#...#.#.##.#.
#.#...####...#..#
#.#...####...#..#
###.#...#.#.##.#.
..####..#####....
.....###...#..###
.....###...#..###
..####..#####....
###.#...#.#.##.##

##.#..##.##.#
.#...........
.#####...##..
##.#...#.##.#
...#.###.##.#
.##..#..#..#.
#.##..#......
#..###..#..#.
#.#.##.......
...#.###.##.#
.#.###.#....#
##..#....##..
#..##########
##.##########
##..#....##..
.#.###.#....#
...#.###.##.#

##.######.##.
...#....#..##
####....#####
...#.##.#....
###..##..###.
#..######..##
..#.#..#.#..#
#.##.##.##.##
...##..##....
##...##...###
##...##...###
...##..##....
#.##.##.##.##
..#.#..#.#..#
#..######..##
###..##..###.
...#.##.#....

####..#.#####
#..#...##.##.
.##.##.######
#..#...#.....
#..#.##..####
###.#..#.....
#..###..#....
#..#......##.
####..##..##.

###......
..#.##..#
...######
...###...
###.#####
#..##....
#..##....
###.#####
...###...

..##..#########
####.....#.#.#.
###.#..####.###
.#..##..####.#.
#.#.##.##......
....####..#..##
###.##..##.....
.#..##....###.#
.#..##....###.#
###.##..##.....
....####..#..##
#.#.##.##......
.#..##..####.#.
###.#..####.###
####....##.#.#.
..##..#########
..##..#########

......#.##.#.
#....#......#
##..###....##
.#..#..#..#..
#....########
.#..#...##...
.#..#.##..##.
##..#########
..##........#
######......#
.####...##...
.#..#...##...
#....#......#
..##..#....#.
##..###....##

.###.###.
#.#..####
###.##.#.
###.##.##
#.#..####
.###.###.
.###.###.
#.#..####
###.##.##
###.##.#.
#.#..####
.###.###.
#...#.#.#

.#....#..
.##...#..
.###.##..
#.##.#...
.####..##
#.#.#.###
..#...#..
##...#...
##..####.
##..####.
##...#...
..#...#..
#.#.#.###
.####..##
#.##.#...
.###.##..
.##...#..

#..##....##..
.##.#.##....#
#..#.#..#..#.
#####....##..
....##.##...#
#..#...######
#..####.#..#.
.##.###..##..
....###......
.##..#..####.
#..###.#.##.#
.......######
.....####..##

####.#..##.##
.##.########.
.##.#.#..##.#
....#.#.#.###
.##..#.##.###
#..##..###.##
#####.###....
######.#.#..#
.##....###...
.........##.#
#####.##.#...
#..###.##.##.
....###.#..##
######.#..#.#
#..#.#.#..###
#..#.#.#..#.#
######.#..#.#

.#.#.####
.###.#..#
#..#.....
..#...##.
..#.##..#
.#.#.....
...#.####
###......
...###..#
...###..#
.##......

#....####..
.##.##..###
.....####..
.#..#...#.#
..#...#..#.
####.#.##..
####.#.##..
..#...#..#.
.#..#...#.#
.....####..
.##.##..###
#....####..
.....####..

.#..#..#.
#.#.####.
.#.######
#..######
####.##.#
####.##.#
....#..#.
..##....#
###......
###......
..##....#
....#..#.
.###.##.#

.#.##...#..##
#.#.#.#...#.#
.##.....##.#.
.##..##..####
...#.#####.##
#.#####..#...
#.#####..#...
.#.#.#####.##
.##..##..####
.##.....##.#.
#.#.#.#...#.#
.#.##...#..##
.#.##...#..##

####...##.#..##..
#######........##
..#..##.#....##.#
##....##..###.#.#
.####..###...###.
..#.###.#..#.#..#
..#.###.#..#.#..#
.####..###...###.
##....##..###.#.#
..#..##.#....##.#
#######........##
####...##.#..##..
#..#...#.##.##.#.
.###.#..#.###.#.#
.###.##.#.###.#.#
#..#...#.##.##.#.
####...##.#..##..

#...####.#.....
#..#.#.#.....#.
####.#.#....##.
#..#...#.#.####
.##......#.##..
.##...#####....
.##.#..#.......
.##.#..#.......
.##...#####....
.##......#.##..
#..#...#.#.####

.###.#.....
...##..#.#.
##....##...
..#..#.#...
##.##.##..#
##.##.##..#
..#..#.#...
##....##...
...##..#.#.
.###.#.....
..#.#.###.#
##.##..#.##
##.##..#.#.

.#....#.#.#.#....
#.####.#...####..
#..##..##.##..###
.#.##.#..#####.##
#..##..##.#....##
#.#..#.#.#.#.#...
.######....#.#...
#.####.#....#.###
...##...###..##..
..#..#..#.##..#..
#..##..#.#.##.#..
.#....#.#..##..##
##..#.###.####.##

.##..##.###
.######.#..
###..###...
#.#..#.###.
##....##...
##....###..
#..##..#.##
#########.#
.#.##.#..#.
..#..#...##
.#....#.##.
.#....#.##.
..#..#....#
.#.##.#..#.
#########.#
#..##..#.##
##....###..

#...#.#..#.
####.#..#.#
##.#..####.
#.###.#..#.
......####.
.###.######
#.#.##.##.#
...###....#
.....#....#
##..#..##..
##.#.######
##.#.######
##..#..##..
.....#....#
...###....#
#.#.##.##.#
.###.######

#.#####...#......
#.#####...#......
.##...###..#.#...
.#.####.####...#.
....##..#.##...##
###...#..#.##...#
....##.#.##.#.##.
##.#.#....#####.#
..##.#.#..###.#.#
##.###.####.#...#
#..###.####.#...#
..##.#.#..###.#.#
##.#.#....#####.#
....##.#.##.#.##.
###...#..#.##...#

##..###
.####..
#....##
..##...
#.##...
##..###
#.##.##

.#.#..#....##...#
.###..#....##...#
.#####.##..#.#..#
#.##.##.#........
#.##.##.#........
.#####.##..#.#..#
.###..#....##...#
.#.#..#....##...#
###..#..###.##.#.
##.....###.#..###
####...####..####

##..##.##.#
#...###..##
.#...######
#..##......
.##########
###........
###.#......
..#.#......
#.#.#######
.#..###..##
#.#.#......
.######..##
...#.######
..#.#..##..
..#####..##
#.#########
##.########

..##..#..
#.#..##..
#..#####.
.####...#
.####...#
#..####..
#.#..##..
..##..#..
##..#....
..#....##
..#....##
##..#....
..##..#..

.#..#....
#.##.###.
#....####
#....##.#
#.##.#..#
##..##.#.
#....#.#.
#....#..#
#....##.#
#....#.#.
##..##.#.
#.##.#..#
#....##.#
#....####
#.##.###.
.#..#....
##..###..

...####.##..#
#.....####..#
...#...#.#..#
###..#.###..#
.#.#.##.#.##.
...#.##.#.##.
###..#.###..#
...#...#.#..#
#.....####..#
...####.##..#
.....###.####

#.##...
.#.#...
##.#.##
.#.####
.#.##..
.##.#..
.###.##
#.#..##
..###..
.####..
.###...

.##..##.########.
.#.##.#...####...
.######.#.#..#.#.
.##..##.##....##.
.######.#.####.#.
########..#..#..#
..#..#..#.#..#.#.
..#..#..#.#..#.#.
.#......#.####.#.

#...###..##..##
.###..#####..##
.##.#.##.#.##.#
..#..###.##..##
#...#....##..##
##.#####..####.
#####...#.#..#.
###..#..###..##
###.###.#######
#...##...#....#
##.#.#.#.#.##.#
##.#.#.#.#.##.#
#...###..#....#

.#.##.#..##.#..
##..#.##.##..##
.#.#.#.....#...
#...###.####.##
#.#..#.##.##...
###..#.##.##...
#...###.####.##
.#.#.#.....#...
##..#.##.##..##
.#.##.#..##.#..
...#.#...#.##..
..###.#..####..
##..####.#.....
######.##...###
..#.....#.##.##

......#
......#
..#..#.
####.#.
..#.##.
##.##..
..#.###
...###.
##.###.
...###.
..#...#
##...#.
##...#.
####.##
##.#.##
###..#.
.#.##.#

..####..#.#...#..
.#....#.######..#
.#.##.#.....#....
.#.##.#.....#....
.#....#.######..#
..####..#.#...#..
..####..####.####
##....##..#.###..
.......##......#.

###..##..
..#.#..#.
###.####.
##..####.
...#....#
##.#.####
...######
...######
..#.#..#.
..#######
##.......
..#..##..
..#......
##...##..
#####..##

##........##...
...######......
..##....##..##.
###..##..######
##..#..#..#####
..###..###..###
.....##.....#.#
..#.####.#...#.
###..##..####..
...######.....#
..#..##..#..#..
#...####...#..#
##.#....#.##...
###......###.#.
..###..###..#..
###.#..#.####..
..#..##..#..#.#

#...##.#.
#...#..#.
...#.#...
.######..
.....#.#.
.#...####
..#..#...
..#..#...
.#...####
.....#.#.
.######..
...#.#...
#...#..#.
#...##.#.
#.#..#.##
#.#.##..#
.#.###.##

.######....#.#.
.........#...##
.#....#.#.#....
..#..#....#.###
#.####.##..#..#
...##...#..####
...##...#..####
#.####.##..#..#
..#..#....#.###
.#....#.#.#....
.........#..###

....###.#..
#...#...###
#...#...###
....###.#..
.......#.#.
#.##.##.###
##..#..#...
#####..#.##
##..#......
##...#.#.##
#.#..##.#..

..####...##.#
..####....###
##.##.##..###
...##...##.#.
.##..##.#####
##.##.#####..
..####...#.#.
........#...#
###..###..#.#
...##....#...
##....##..###
..####..##.##
##.##.###.##.

##...####...#
...#......##.
#####.##.####
##.#.#..#.#.#
###..#..#..##
....#....#...
...##.##.##..

.##.##...
.#...#...
###.#.###
#......##
.##.#####
###.#..##
.#....#..
##...#...
#.##.#.##
#.##.####
##...#...

####.#..#
...##.###
##.....#.
..#..###.
..#..###.
##.....#.
..###.###
####.#..#
....#.#.#
.##.#..#.
..#..##..
#.##.#.#.
#.##.#.#.
..#..##..
.##.#..#.

...#.#.
###.#..
......#
#####..
##..###
##.....
##.#...
##.#...
##.....
##..###
#####..
...#..#
###.#..

..#.#.#
####.##
######.
...#.#.
...#...
..##..#
...###.
###.##.
#####..
#####..
######.
...###.
..##..#
...#...
...#.#.
######.
####.##

.#..##.#.####
###.##....##.
..#####......
####.#.......
.##..###..##.
....#...#####
####..#.#####
#.##.##.#....
#######......
##.#.....####
#.##.###..##.
#.##.###..##.
##.#.....####
#######......
#.##.#..#....

....#.#...##.....
#..#..###...###.#
#..######..##.##.
#..#.#.#...#.#..#
.......#.##......
.##.##...####....
.....#....####..#

..####...
...##....
...##....
..####...
#.#..#.##
.#.##.#.#
..####...
########.
##...####
#..##..##
##....###
.######..
...##....

#..##.#..#..#.#
#..##.#..#..#.#
#.###...##.###.
....#.####.#.##
.##..#...#.#..#
###.#####..#.##
#.###...###.#.#
#..#.##....#.##
#..#.##....#.##
#.###...###.#.#
###.#####..#.##
.##..#...#.#..#
....#.####.#.##
#.###...##.#.#.
#..##.#..#..#.#

.##.#..#.
####....#
#####..##
.##.####.
.##.####.
..#.#..#.
####....#
#..#.##.#
....#..#.
####.##.#
.##.#..#.
####.##.#
.##......

....#..##..##
....#..##..##
..###.....##.
####.##..#.#.
#..#.#.#....#
.##.#.#..#.##
.#..##..#..##
#.#.....#.#..
###.....#.#..
.#..##..#..##
.##.#.#..#.##
#..#.#.#....#
####.##..#.#.
..###.....##.
....#..##..##

##.#.######.#
....##.##.##.
#####.#..#.##
##.##..##..##
...#.##..##.#
..##..####..#
..#....##....
##.###.##.#.#
####.#....#.#

.###.....###.##
####.#.##..#.#.
###..#.##..#.#.
.###.....###.##
#.#######.#..#.
#..#...#.#.#...
#...#.#####..#.
#...#.#####..#.
#..#...#.#.#...
#.#######.#..#.
.###.....###.##
###..#.##..#.#.
####.#.##..#.#.
.###.....###.##
.#....###.#.#..

..##.#....#
.######.##.
.######.##.
..##.#....#
.#.##.#....
###.##.####
##..#..###.
...#..#.#.#
###...#.#.#
###...#.#.#
...#..#.#.#
##..#..###.
.##.##.####
.#.##.#....
..##.#....#

#..#......###..
#..#......###..
#.####........#
#..##.....##..#
#..#.#######..#
.##..#...#...##
.....####..#...
#..##..##.#.#..
.##.###.#..#.##

###.###..
###.###..
..#.#.#.#
####.....
..#.....#
#....##..
###.##.##
#####..#.
#####..#.
###.#..##
#....##..

.###.#.##.#.###.#
##..#..##..#..###
#..##.#..#.##..##
##..#.#..#.#..##.
...###....###...#
.#...##..##...#..
..........#......
#....######....#.
..####.##.####...
.###.#.##.#.###.#
######.##.#######
##....#..#....###
##.#.#....#.#.##.
##.#.#....#.#.##.
##....#..#....###
######.##.#######
.###.#.##.#.###.#

.#.#..###..##
#.##.#####...
####.#..#.#..
.##...#.#####
#..#..###....
#..###.......
###..#.#.##..
..###.##.####
..#.#.##.####
###..#.#.##..
#..###.......
#..#..###....
.##...#.#####
####.#..#.#..
#.##.#####...
.#.#..###..##
##....#######

#.###...#.#####
######.#.####.#
#....##...##.#.
#....##...##.#.
######.#.####.#
#.###...#.#####
####..#.#..#..#
.##.###.##.##..
....########..#
##.##..###..#.#
##.##..###..#.#
....########..#
.##.###.##.##.#
####..#.#..#..#
#.###...#.#####

....##...
#######..
.......#.
....#.#..
####..#.#
#####...#
####.#..#
.....#.##
.##.#.#..
######.#.
.....#.##
.....###.
#####..#.
####.###.
######.##

.#...#.####..
.#...#.####..
..########...
.###..#.#.#..
#...#....#.##
.......#...#.
.#.######.#.#
###.#.#.####.
....###..##.#
...#.#.####..
...#.#.####..
....###..##.#
###.#.#.####.
.#.######.#.#
..#....#...#.
#...#....#.##
.###..#.#.#..

#.#..######
#.#.#######
.##.##....#
#..........
###.##.##.#
.##########
##.#...##..

....####..###
##.###.####.#
##..#........
##.#.#......#
..#.#.#.##.#.
....#.#....#.
..##.###..###
###.##..##..#
...##...##.#.
..#.....##...
###.##......#

.##..#.#..#..
#.....#######
#.#####.##...
#######..####
.####..####..
.####...###..
#######..####
#.#####.##...
#.....#######

.#.##....##.#....
.#.##....##.#....
####.####.#####..
#.##########.#.#.
.#.##....##.#..#.
####......#####.#
#...######......#
#.#.######.#.#..#
#.##.####.##.#.##
..#........#.....
#.#...##...#.#.##

####....#
##.#....#
.########
#..######
#.#......
#.#######
##..####.

###........##.##.
###...###.#..#...
#####.#.....#####
..#.##........#.#
..#.##........#.#
#####.#.....#####
###...###.#..##..
###........##.##.
######.###...#...
##..##.##.###.#.#
#####.#.##..#....
...#..#..#..#.##.
...##.####..###..
##.#....##.#....#
##.#.##.#####.###

#...#.##.
.###.#...
.#####...
#...#.##.
.......##
#.#...###
#.#...###

..#.##.###.##.#
.###.#.......##
#..#.#...#..#.#
########..####.
########..####.
#..#.#...#..#.#
.###.#.......##
..#.##.###.##.#
#...#...##.....
#.#..#.###.....
#..##.#.##.####
..#######.###.#
..###########.#

.#..##.
##.##..
##.##..
.#..##.
##.###.
#.#####
#..##.#
####..#
..##..#
..##..#
####...

##..##..##..#
....######...
######..#####
##.##.##.##.#
...########..
###.######.##
###.######.##
#####....####
..#........#.
###........##
##.########.#
..#.#....#.#.
##...####...#
######..#####
..#.##..##.##

#..####
....###
####.##
.##.###
####.#.
.##.#.#
.##.#..
....#.#
....#.#
.##.#..
.##.#.#
######.
.##.###

...######
.#..###.#
####.##.#
#.#.....#
#.#.....#
####.##.#
.#..###.#
...######
####.####
.#..##..#
##..#.##.
.....###.
.#..#.#..
.#..#.#..
.....##..

..#..#..#.#.....#
##.##.##.#...#.#.
##.##.##.#...#.#.
..#..#..#.#.....#
.#######.#..##.##
.........###..##.
.#....#..#.#..##.

......#..#.
..##...#.#.
#######.###
#....#.#..#
######....#
......#..#.
..##.......
##..######.
#.#####..#.
#....#.#.##
..##...#.##
..##......#
..##......#

...#.#..#
...######
..#......
..#######
...#..##.
...#.####
..#.#.##.
..##..##.
..#...##.
##.##.#..
##....##.
..#..#..#
###..#..#

.##.#..###.#...##
#..#.##....#.#..#
.........##.#.###
.##.....###...###
.##.##.#...###.#.
.##.##.#...###.#.
.##.....###...###
.........##.#.###
#..#.##.#..#.#..#

#.###.##.##
#..#......#
#.#.##..##.
.###.#..#.#
.###.#..#.#
#...##..##.
#..#......#
#.###.##.##
####......#

...##.##.#.#.#.
...##.##.#.#.#.
.##...#..##.#.#
.###.#.##..#.#.
....###..#.####
....###..#.####
.###.#.##..#.#.
.##...#..##.#.#
#..##.##.#.#.#.

#..##......##
#.#....##....
##.##.####.##
.#...##..##..
.#.####..####
.##...#..#...
.####.####.##
.#.##..##..##
#..##..##..##
#.#..#.##.#..
#..#.##..##.#
#.###.####.##
##.####..####
#.#....##....
..#..........

.#.##.#.#..##.#
#..##..##......
##....###......
.#....#.##..##.
#.#..#.#..#.##.
#......#.#.#..#
...##...#.#....
...##...#.#.##.
#########.#.##.
##....###......
#.####.#..#.##.

##..........##..#
..####..####..##.
..####..####.....
..##......##..##.
#..#..##..#..####
#.#........#.####
#####.###########

###########..
##.##.##...#.
#.#..#.##.#.#
###..######..
#..##..##....
#..##..##....
###..######..
#.#..#.##.#.#
##.##.##...#.
###########..
.#...##.#.#.#

..#.#.##..##.
....##.#.#.#.
#####......#.
#...#.#####..
##..##.....##
.#.##..###.#.
..###.##..#.#
..###.##..#.#
.#.##..###.#.
##...#.....##
#...#.#####..
#####......#.
....##.#.#.#.
..#.#.##..##.
..#.#.##..##.

..#.#.#..#...
..#.#.#..#...
....#...####.
..##.#.#.#..#
.#.#....#....
#####..#.#.##
.####.##.....
..######.#...
..##.#.#..###
..##...#..###
..######.#...
.####.##.....
#####..#.#.##
.#.#....#....
..##.#.#.#..#
....#...####.
..#.#.#..#...

.##.#.#.#..
.##.#.#.#..
#.####.#.#.
#.##.....##
...#.##.#..
.##.##.#..#
...##.##.#.
#.....#.#.#
#.....###.#
...##.##.#.
.##.##.#..#

.###..###
.##....##
#.#....#.
.########
##.#..#.#
##......#
##..###.#
#.#.##.#.
.#......#
..#....#.
####..###
...#..#..
...#..#..
####..###
..#....#.`

  const patterns = input.split('\n\n')

  const lines = patterns.map((pattern) => getSymmetryLine(pattern)).filter((item): item is SymmetryLine => !!item)
  console.log('Part 1 result:', getPatternSummary(lines))
  const lines2 = patterns
    .map((pattern) => getSymmetryLine(pattern, true))
    .filter((item): item is SymmetryLine => !!item)
  console.log('Part 2 result:', getPatternSummary(lines2))
}
